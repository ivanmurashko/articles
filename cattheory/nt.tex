%% -*- coding:utf-8 -*-
\chapter{Natural transformation}

Natural transformation is the most important part of the category
theory. It provides a possibility to compare \mynameref{def:functor}s
via a standard tool. 

\section{Definitions}

The natural transformation is not an easy concept compare other one
and requires some additional preparations before we can give the
formal definition.

\begin{figure}
  \centering
  \begin{tikzpicture}[ele/.style={fill=black,circle,minimum
        width=.8pt,inner sep=1pt},every fit/.style={ellipse,draw,inner
        sep=-2pt}]

    % the texts

    \node at (0,3) {$C$};        
    \node at (4,3) {$D$};        

    \node[ele,label=above:$a$] (a) at (0,2) {};    
    \node[ele,label=above:$a_F$] (af) at (4,2) {};
    \node[ele,label=below:$a_G$] (ag) at (4,0) {};

    \node[draw,fit= (a),minimum width=2cm, minimum
      height=3.5cm] {} ;
    \node[draw,fit= (af) (ag),minimum width=2cm, minimum
      height=3.5cm] {} ;

    \draw[->,thick,shorten <=2pt,shorten >=2pt] (a) to
    node[above]{$F$} (af);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (a) to
    node[above]{$G$} (ag);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (af) to
    node[right]{$\alpha_a$} (ag);
  \end{tikzpicture}
  \caption{Natural transformation object mapping}
  \label{fig:nt_objects_mapping}
\end{figure}

Consider 2 categories $\cat{C}, \cat{D}$ and 2
\mynameref{def:functor}s $F: \cat{C} \to \cat{D}$ and $G: \cat{C} \to
\cat{D}$. If we have an \mynameref{def:object} $a \in \catob{C}$ then
it will be translated by different functors into different objects of
category $\cat{D}$: $a_F = F a, a_G = G a \in \catob{D}$ (see
\cref{fig:nt_objects_mapping}). There are 2 options possible
\begin{enumerate}
\item There is not  any \mynameref{def:morphism} that connects $a_F$
  and $a_G$.
\item $\exists \alpha_a \in \hom\left(a_F, a_G\right) \subset
  \cathom{C}$. 
\end{enumerate}
We can of course to create an artificial morphism that connects the
objects but if we use \textit{natural} morphisms 
\footnote{the word natural means that already existent morphisms from
  category $\cat{D}$ are used}
then we can get a
special characteristic of the considered functors and categories. For
instance if we have such morphisms then we can say that the
considered functors are related each other. Opposite example if there
is no such morphisms then the functors can be considered as unrelated
each other. Another example if the
morphisms are \mynameref{def:isomorphism}s then the functors can be
considered as equal.

\begin{figure}
  \centering
  \begin{tikzpicture}[ele/.style={fill=black,circle,minimum
        width=.8pt,inner sep=1pt},every fit/.style={ellipse,draw,inner
        sep=-2pt}]

    % the texts

    \node at (0,3) {$C$};        
    \node at (4,3) {$D$};        

    \node[ele,label=above:$a$] (a) at (0,2) {};    
    \node[ele,label=below:$b$] (b) at (0,0) {};    
    \node[ele,label=above:$a_F$] (af) at (4,2) {};
    \node[ele,label=below:$a_G$] (ag) at (4,0) {};
    \node[ele,label=above:$b_F$] (bf) at (5.5,2) {};
    \node[ele,label=below:$b_G$] (bg) at (5.5,0) {};

    \node[draw,fit= (a) (b),minimum width=2cm, minimum
      height=3.5cm] {} ;
    \node[draw,fit= (af) (ag) (bf) (bg),minimum width=3cm, minimum
      height=4cm] {} ;

    \draw[->,thick,shorten <=2pt,shorten >=2pt] (a) to
    node[left]{$f$} (b);

    \draw[->,thick,shorten <=2pt,shorten >=2pt] (af) to
    node[below]{$f_F$} (bf);

    \draw[->,thick,shorten <=2pt,shorten >=2pt] (ag) to
    node[above]{$f_G$} (bg);

    \draw[->,thick,shorten <=2pt,shorten >=2pt] (a) to
    node[above]{$F$} (af);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (b) to
    [out=45,in=135,looseness=1] node[above]{$F$} (bf);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (a) to
    node[above]{$G$} (ag);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (b) to
    [out=-45,in=-135,looseness=1] node[above]{$G$} (bg);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (af) to
    node[left]{$\alpha_a$} (ag);
    \draw[->,thick,shorten <=2pt,shorten >=2pt] (bf) to
    node[right]{$\alpha_b$} (bg);
  \end{tikzpicture}
  \caption{Natural transformation morphisms mapping}
  \label{fig:nt_morphisms_mapping}
\end{figure}


The functor is not just the object mapping but also the morphisms
mapping. If we have 2 objects $a$ and $b$ in the category $\cat{C}$
then we potentially can have a morphism $f \in \hom(a, b)$. In this
case the morphism is mapped by the functors $F$ and $G$ into 2
morphisms $f_f$ and $f_G$ in the category $\cat{D}$. 
As result we have 4 morphisms: $\alpha_a, \alpha_b, f_F, f_G \in
\cathom{D}$. It is natural to impose additional conditions on the
morphisms especially that they form a
\mynameref{def:commutative_diagram}: 
\[
f_f \circ \alpha_b = \alpha_a \circ f_G.
\]

TBD

\begin{definition}[Natural transformation]
\label{def:nt}
TBD
\end{definition}

TBD

\section{Examples}

\subsection{\textbf{Set} category}
TBD

\subsection{Programming languages}

\begin{definition}[Parametric polymorphism]
\label{def:parametric_polymorphism}
Polymorphism is parametric if all function instances behave uniformly
i.e. have the same realization
\end{definition}

\begin{definition}[Ad-hoc polymorphism]
\label{def:ad_hoc_polymorphism}
Polymorphism is parametric if the function instances can behave
differently dependently on the type they are being instantiated with. 
\end{definition}


\begin{theorem}[Reynolds]
\label{thm:reynolds}
Functions that satisfy \mynameref{def:parametric_polymorphism} are
\mynameref{def:nt}s 
\begin{proof}
TBD
\end{proof}
\end{theorem}

\subsubsection{\textbf{Hask} category}

\begin{example}[Natural transformation][\textbf{Hask}]
\label{ex:nt_hask}
Consider the following function
\begin{minted}{haskell}
safeHead :: [a] -> Maybe a
safeHead [] = Nothing
safeHead (x:xs) = Just x
\end{minted}
The function is parametricaly polymorphic and by
\mynameref{thm:reynolds} is \mynameref{def:nt}

\end{example}
TBD
