%% -*- coding:utf-8 -*-
\chapter{Monads}

Monads are very important for pure functional programming languages
such as Haskell. We will start with formal mathematical definition and
will continue with programming languages examples later.

\begin{definition}[Monad]
  \label{def:monad}
  The monad $M$ is an \mynameref{def:endofunctor} with 2
  \mynameref{def:nt}s:
  \begin{enumerate}
  \item $\eta: \idf{C} \tont M$
  \item $\mu: M \circ M \tont M$
  \end{enumerate}
  where $\idf{C}$ is \mynameref{def:idfunctor}.

  The $\eta, \mu$ should satisfy the following conditions:
  \begin{eqnarray}
    \mu \circ M \mu = \mu \circ \mu M, 
    \nonumber \\
    \mu \circ M \eta = \mu \circ \eta M = \idnt{M},
    \nonumber
  \end{eqnarray}
  where $M \mu, M \eta$ - \mynameref{def:rw}s, $\mu M, \eta M$ -
  \mynameref{def:lw}s, $\idnt{M}$ - \mynameref{def:idnt} for $M$.
  \mynameref{def:vertical_composition} is used in the equations
  (???TBD verify).
\end{definition}

%% \section{Category of endofunctors}
%% When 

%% The \mynameref{ex:fun_category} is an example of a category. We can
%% apply additional limitation and consider only
%% \mynameref{def:endofunctor}s i.e. we will look at the category
%% $[\cat{C}, \cat{C}]$ - category of functors from category $\cat{C}$ to
%% the same category.

%% Lets continue to add our limitations and consider the category of
%% endofunctors that consists only one object
%% i.e. \mynameref{def:monoid}. 

TBD

\section{Examples}

\subsection{Programming languages}

\subsubsection{Haskell}

In Haskell monad can be defined from \mynameref{ex:functor_haskell} as follows 
\footnote{real definition is quite different from the presented one}
\begin{example}[Monad][\textbf{Hask}]
\label{ex:monad_haskell}
\begin{minted}{haskell}
    class Functor m => Monad m where
        return :: a -> m a
        (>>=)  :: m a -> (a -> m b) -> m b
\end{minted} 
\end{example}

TBD

\subsubsection{C++}

TBD

\subsubsection{Scala}

\begin{example}[Monad][\textbf{Scala}]
The monad concept is Scala is more close to formal math definition for
\mynameref{def:monad}. It can be defined as follows 
\footnote{real definition is quite different from the presented one}
\label{ex:monad_scala}
\begin{minted}{scala}
trait M[A] {
  def flatMap[B](f: A => M[B]): M[B]
}
  
def unit[A](x: A): M[A]
\end{minted} 
I.e. \mintinline{scala}{flatMap} can be considered as $\mu$ and
\mintinline{scala}{unit} as $\eta$. 
\end{example}


TBD
