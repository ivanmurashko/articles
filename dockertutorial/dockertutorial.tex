%% -*- coding:utf-8 -*- 
\documentclass[14pt,a4paper]{article} 

\usepackage[utf8]{inputenc}
\usepackage{minted}
\usepackage{longtable}
\usepackage{hyperref}
\hypersetup{
  pdftex,
  allcolors=blue,
  bookmarksnumbered=true,     
  bookmarksopen=true,         
  bookmarksopenlevel=1,       
  colorlinks=true,            
  pdfstartview=Fit,           
  pdfpagemode=UseOutlines,  
  pdfpagelayout=TwoPageRight,
  pdftitle={Docker tutorial},
  pdfsubject={Docker},
  pdfauthor={Ivan Murashk–æ},
  pdfkeywords={Docker, tutorial}
}

\title{Docker tutorial}
\author{Ivan Murashko}
\date{}
\begin{document}

\maketitle
\tableofcontents

\section*{Introduction}
There are several examples of docker usage. They are collected in one
place mainly for future references.

The source code for examples can be found on the article git
repository \cite{github:articles_ivanmurashko} in the folder 
\textbf{dockertutorial/src}.

\section{Base commands}

\subsection{Simple program run}
You can run a command (\textbf{uname -a}) with 
\begin{minted}{shell}
$ docker run ubuntu uname -a
\end{minted}
The container \textbf{ubuntu:latest} will be used in the case. 

The command execution status can be viewed with
\begin{verbatim}
$ docker ps -a 
CONTAINER ID   IMAGE   COMMAND     CREATED         ...
b5e8d82cce29   ubuntu  "uname -a"  5 seconds ago  ...
\end{verbatim}
If you run the docker with \textbf{--rm} flag then the status info
will not be stored.


\subsection{Interactive session}
You can run an interactive shell with
\begin{minted}{shell}
$ docker run -it ubuntu /bin/bash
\end{minted}
where \textbf{-it} means \textbf{--interactive --tty}, 
\textbf{ubuntu} the latest ubuntu image and \textbf{/bin/bash} - the
command to be start 

\subsection{Docker as a daemon}
First of all run the docker in interactive mode and as daemon
\begin{minted}{shell}
$ docker run -itd ubuntu
\end{minted}
possible output
\begin{verbatim}
649dae02de59ea3eb065a40b1248b2d322986e563ab12af3126fa4bb4710008a
\end{verbatim}
Check the docker run in daemon mode with
\begin{minted}{shell}
$ docker ps
\end{minted}
output:
\begin{verbatim}
$ docker ps 
CONTAINER ID        IMAGE               COMMAND     ...
649dae02de59        ubuntu              "/bin/bash" ...
\end{verbatim}
Execute \textbf{ls /var} command in the run docker
\begin{verbatim}
$ docker exec -it 649dae02de59 ls /var
backups  cache  lib  local  lock  log  mail  opt  run  spool  tmp
\end{verbatim}
Stop it with
\begin{verbatim}
$ docker stop 649dae02de59
649dae02de59
\end{verbatim}
Check the result
\begin{verbatim}
$ docker ps
CONTAINER ID        IMAGE               COMMAND   ...
\end{verbatim}

\subsection{Cleanup}
The following command will remove everything
\begin{verbatim}
$ docker system prune -a
WARNING! This will remove:
        - all stopped containers
        - all networks not used by at least one container
        - all images without at least one container associated to them
        - all build cache
Are you sure you want to continue? [y/N] y
Deleted Containers:
b5e8d82cce2942a24c709b630ff4e0dd705b89d78f2777065446ce97cf152cab
...
Total reclaimed space: 6.113GB
\end{verbatim}

\bibliographystyle{gost780s}  
\bibliography{dockertutorial}     


\end{document}
