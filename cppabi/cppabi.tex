%% -*- coding:utf-8 -*- 
\documentclass[14pt,a4paper]{article} 

\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{minted}

\title{C++ ABI}
\author{Мурашко И. В.}
\date{}
\begin{document}

\Russian

\maketitle

\section*{Введение}
По роду своей деятельности мы часто сталкиваемся с библиотеками сторонних 
разработчиков которые предоставляются нам в бинарной форме, например 
Oracle OCCI. Вместе с тем в разработке мы используем разные версии 
компиляторов gcc, которые не всегда совместимы по умолчанию с Oracle OCCI. 
В данном докладе детально описываются соответствующие проблемы и способы 
их решения. 

\section{API vs ABI}

TBD

\section{gcc5 ABI}

Версия 5 компилятора gcc была одной из первых, которая полностью (?)
поддерживала новый стандарт c++11. Новые конструкции этого стандарта
тербовали измененений в двоичном представлении некоторых объектов STL
прежде всего это касается std::list, std::string, std::ios\_base,
std::locale. 

\subsection{std::string}

Рассмотрим следующий фрагмент
\inputminted{c++}{./src/str.cpp}

GCC 5 дает вполне предсказуемый вывод: мы получаем копию строки со
своими внутреннеми данными
\begin{minted}{shell}
$ ./str5
0x7ffc757fc1b0
0x7ffc757fc200
$
\end{minted}

Другая ситуация GCC 4:
\begin{minted}{shell}
$ ./str4
0x1d5be88
0x1d5be88
$
\end{minted}


TBD

\subsection{std::list}

TBD

\subsection{std::ios\_base}

TBD

\section{Бинарные внешние библиотеки}

TBD


\end{document}
